{
    "name": "iditGetListOfClaims",
    "flow": {
        "name": "iditGetListOfClaims",
        "description": "",
        "steps": [
            {
                "stepType": "mapEnrich",
                "condition": "{{contactId != ''}}",
                "config": {
                    "maps": [
                        {
                            "value": 6,
                            "targetPath": "role"
                        }
                    ]
                },
                "isSelected": false
            },
            {
                "stepType": "apiEnrich",
                "stepArgs": "soapSlim",
                "config": {
                    "endpoint": {
                        "url": "http://idit-ci:7014/idit-web/ws?methodName=search&serviceName=IDITServices&wsdl"
                    },
                    "method": "IDITServicessearch.IDITServicessearchInterface.IDITServicessearch",
                    "targetPath": "result.listClaims",
                    "soapRequest": {
                        "searchIVO.attributes.main": "true",
                        "searchIVO.finderKey": "4",
                        "searchIVO.contactId": "{{contactId}}",
                        "searchIVO.policyContactRole": "{{role}}"
                    },
                    "httpHeaders": {
                        "userName": "{{$env.userName}}",
                        "password": "{{$env.password}}"
                    }
                },
                "isSelected": false
            },
            {
                "stepType": "mapEnrich",
                "stepArgs": "jsonata",
                "config": {
                    "maps": [
                        {
                            "jsonata": "{'claims':$map(result.listClaims.multiEntityContainerIVO.claimInListIVOList.claimInListIVO,function($v,$i){ { 'policyNumber':$v.policyNr, 'claimEventDate':$v.claimDate, 'claimCause':$v.claimEventDescription, 'status': { 'id': $v.claimStatusRef.attributes.id, 'description': $v.claimStatusRef.'$value' }, 'lastInteractionDate': '', 'nextAction': '','claimNumber': $v.claimNr } })}",
                            "targetPath": "result.listClaims"
                        }
                    ]
                },
                "isSelected": true
            }
        ]
    },
    "inputSchema": {
        "type": "object",
        "properties": {
            "contactId": {
                "type": "string"
            }
        },
        "example": {
            "contactId": "28898"
        },
        "default": {
            "contactId": "28898"
        }
    },
    "createDate": "2019-08-11T12:36:42.607Z",
    "tag": null
}